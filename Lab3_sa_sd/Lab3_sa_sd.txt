Министерство науки и высшего образования Российской ФедерацииФедеральное государственное автономное образовательное учреждение высшего образования «Национальный исследовательский университет ИТМО»Факультет Программной инженерии и компьютерной техники      Проектная работапо дисциплине «Системный анализ и системное проектирование»Итерация №3 Преподаватель: Маркина Татьяна АнатольевнаВыполнили:Михайлов Дмитрий АндреевичМалышев Никита АлександровичГруппа: Р3306, P3312Санкт-Петербург, 20251. Диаграммы вариантов использованияРис. 1: Use Case-диаграмма для библиотечного сервиса.2. ПрецедентыАвторизация (регистрация и активация учётной записи)ОписаниеОпределить, какие ресурсы и действия доступны конкретному пользователю в рамках системы, на основе его учётной записи, ролей и прав.Предусловия1. Пользователь не авторизован.2. Система доступна для авторизации и регистрации новых пользователей.Акторы (Участники)Неавторизованный пользователь, СистемаОсновной сценарий№ шагаДействие1Неавторизованный пользователь инициирует процесс регистрации в системе.2Система запрашивает у неавторизованного пользователя регистрационные данные (ФИО, электронный адрес, пароль, подтверждение пароля).3Неавторизованный пользователь вводит запрошенные регистрационные данные.4Неавторизованный пользователь отправляет введённые регистрационные данные на обработку.5Система проверяет корректность введённых регистрационных данных.6Система проверяет уникальность указанного электронного адреса пользователя.7Система создаёт учётную запись пользователя в состоянии «ожидает подтверждения».8Система формирует запрос на подтверждение регистрации и направляет его пользователю (например, по электронной почте).9Пользователь подтверждает регистрацию в системе в ответ на запрос.10Система активирует учётную запись пользователя.Альтернативный сценарий: Несовпадающие пароли (шаг №5)1.А.Система определяет, что значения пароля и подтверждения пароля не совпадают.2.A.Система информирует неавторизованного пользователя о несоответствии паролей.3.А.Система запрашивает повторный ввод пароля и его подтверждения.4.A.Неавторизованный пользователь вводит новый пароль и его подтверждение.5.A.Неавторизованный пользователь повторно отправляет регистрационные данные на обработку.6.A.Система возвращается к шагу 5 основного сценария.Альтернативный сценарий: Электронный адрес уже зарегистрирован (шаг №6)1.B.Система определяет, что указанная электронная почта уже зарегистрирована в системе.2.B.Система информирует неавторизованного пользователя о том, что учётная запись с таким электронным адресом уже существует.3.B.Система предлагает неавторизованному пользователю перейти к процедуре входа в существующую учётную запись.4.B.Неавторизованный пользователь может инициировать процесс авторизации (входа) вместо регистрации. Альтернативный сценарий завершается без возврата к основному сценарию.Альтернативный сценарий: Регистрация не подтверждена (шаг №8)1.C.Система удерживает учётную запись пользователя в состоянии «неактивна» до истечения установленного срока.2.C.По истечении установленного срока система удаляет неактивную учётную запись пользователя.3.C.Система информирует пользователя о невозможности использования неактивированной учётной записи при повторной попытке регистрации или авторизации.4.C.Альтернативный сценарий завершается без возврата к основному сценарию.Исключения (Ошибки, отсутствие данных для отображения)E1Ошибка отправки e-mail.1. Система фиксирует ошибку при отправке запроса на подтверждение регистрации.2. Система уведомляет пользователя о невозможности отправки запроса на подтверждение регистрации.3. Система предлагает пользователю повторить отправку запроса на подтверждение регистрации позже.E2Ошибка записи в базу данных.1. Система фиксирует ошибку записи учётной записи в базу данных.2. Система отклоняет регистрацию.3. Система выводит пользователю сообщение о технической ошибке и предлагает повторить попытку позднее.ПостусловияУчётная запись пользователя создана и активирована ИЛИ Регистрация не завершена, и учётная запись удалена/не создана.Поиск материаловОписаниеПоиск и просмотр информации о книгах и других материалах в каталоге библиотеки.Предусловия1. Пользователь имеет доступ к каталогу (гость или авторизованный).2. Каталог доступен для выполнения поисковых операций.Акторы (Участники)Пользователь, СистемаОсновной сценарий№ шагаДействие1Пользователь инициирует поиск материалов в каталоге.2Пользователь вводит ключевые характеристики искомых материалов (например, название, автора, идентификатор).3Пользователь отправляет запрос на поиск материалов.4Система выполняет поиск материалов по указанным критериям.5Система формирует список найденных материалов.6Система отображает пользователю список найденных материалов.7Пользователь задаёт дополнительные параметры отбора материалов (фильтрацию, сортировку).8Пользователь применяет выбранные параметры отбора.9Система пересчитывает результаты с учётом указанных параметров отбора.10Система отображает обновлённый список найденных материалов.11Пользователь запрашивает детальную информацию по выбранному материалу.12Система отображает пользователю детальную информацию о выбранном материале.Альтернативный сценарий: Поиск без указания критериев (шаг №2)1.А.Пользователь не вводит критерии поиска и отправляет запрос.2.A.Система определяет отсутствие критериев поиска.3.А.Система информирует пользователя об отсутствии введённых критериев.4.A.Система предлагает пользователю список популярных или рекомендованных материалов.5.A.• Пользователь выбирает материал из предложенного списка ИЛИ• Пользователь возвращается к вводу критериев поиска (возврат к шагу 2 основного сценария).Альтернативный сценарий: Результаты поиска отсутствуют (шаг №6)1.B.Система не находит материалов, соответствующих заданным критериям.2.B.Система информирует пользователя об отсутствии результатов поиска.3.B.Система предлагает пользователю изменить или уточнить критерии поиска.4.B.Пользователь изменяет или уточняет критерии поиска.5.B.Пользователь повторно отправляет запрос на поиск.6.B.Система возвращается к шагу 4 основного сценария.Альтернативный сценарий: Некорректное сочетание параметров отбора (шаг №9)1.C.Система определяет, что заданные параметры отбора не могут быть корректно применены.2.C.Система информирует пользователя о некорректности сочетания параметров отбора.3.C.Система предлагает пользователю изменить параметры отбора.4.C.Пользователь изменяет параметры отбора.5.C.Пользователь повторно применяет параметры отбора.6.C.Система возвращается к шагу 9 основного сценария.Исключения (Ошибки, отсутствие данных для отображения)E1Ошибка связи с базой данных.Поиск временно недоступен.E2Превышено время ожидания.Система предлагает повторить запрос.ПостусловияОтображены найденные результаты ИЛИ сообщение об их отсутствии.Оформление брониОписаниеПользователь резервирует материал для последующего получения в библиотеке.Предусловия1. Пользователь авторизован.2. Материал доступен для бронирования (существуют экземпляры, подлежащие бронированию).Акторы (Участники)Пользователь, Система, БиблиотекарьОсновной сценарий№ шагаДействие1Пользователь выбирает в каталоге материал, который требуется забронировать.2Пользователь инициирует бронирование выбранного материала.3Система проверяет статус экземпляров выбранного материала (доступен, выдан, забронирован).4Система проверяет ограничения на бронирование для пользователя (например, лимит активных броней).5При отсутствии ограничений система создаёт запись бронирования материала за пользователем.6Система формирует и направляет библиотекарю уведомление о новой брони.7Система формирует и направляет пользователю уведомление об успешном создании брони.Альтернативный сценарий: Материал уже забронирован (шаг №3)1.А.Система определяет, что экземпляры выбранного материала уже забронированы другими пользователями.2.A.Система информирует пользователя о недоступности немедленного бронирования.3.А.Система предлагает пользователю включение в очередь ожидания на данный материал.4.A.Пользователь принимает решение встать в очередь ожидания.5.A.Система создаёт запись о включении пользователя в очередь ожидания.6.A.Альтернативный сценарий завершается без продолжения основного сценария.Альтернативный сценарий: Превышен лимит бронирований (шаг №4)1.B.Система определяет, что пользователь превысил допустимый лимит активных бронирований.2.B.Система информирует пользователя о невозможности создания новой брони из-за превышения лимита.3.B.Альтернативный сценарий завершается без продолжения основного сценария.Альтернативный сценарий: Отмена бронирования до подтверждения библиотекарем (шаг №5)1.C.Пользователь инициирует отмену ранее созданной брони.2.C.Система удаляет запись о бронировании материалов за пользователем.3.C.Система формирует и направляет библиотекарю уведомление об отмене брони.4.C.Система формирует и направляет пользователю уведомление об успешной отмене брони.5.C.Альтернативный сценарий завершается.Исключения (Ошибки, отсутствие данных для отображения)E1Ошибка записи в базу данных.Бронь не создана.E2Потеря соединения с сервером при бронировании.Пользователь уведомляется, и операция отменяется.ПостусловияСоздана активная бронь или поставлена очередь на материал.Оформление выдачи материалаОписаниеБиблиотекарь оформляет выдачу материала пользователю.Предусловия1. Пользователь зарегистрирован в системе.2. У пользователя отсутствуют блокирующие ограничения (например, активные штрафы, критические просрочки).3. Материал доступен для выдачи.Акторы (Участники)Пользователь, Система, БиблиотекарьОсновной сценарий№ шагаДействие1Библиотекарь идентифицирует пользователя в системе.2Библиотекарь выбирает материал, подлежащий выдаче пользователю.3Система проверяет доступность выбранного экземпляра материала.4Система проверяет наличие у пользователя ограничений на выдачу (активные штрафы, просроченные материалы и др.).5При отсутствии ограничений система регистрирует выдачу материала пользователю с указанием срока возврата и места выдачи.6Система формирует и направляет пользователю уведомление о выданном материале и установленном сроке возврата.Альтернативный сценарий: У пользователя есть просроченные материалы (шаг №4)1.А.Система обнаруживает у пользователя просроченные материалы.2.A.Система блокирует операцию выдачи нового материала.3.А.Система информирует библиотекаря и пользователя о причине блокировки выдачи.4.A.Альтернативный сценарий завершается без продолжения основного сценария.Альтернативный сценарий: Материал зарезервирован другим пользователем (шаг №3)1.B.Система определяет, что выбранный материал зарезервирован другим пользователем.2.B.Система запрещает выдачу материала текущему пользователю.3.B.Система информирует библиотекаря и пользователя о невозможности выдачи материала.4.B.Альтернативный сценарий завершается без продолжения основного сценария.Альтернативный сценарий: Изменение срока выдачи библиотекарем (шаг №5)1.C.Библиотекарь принимает решение изменить срок выдачи материала пользователю в соответствии с внутренними правилами библиотеки.2.C.Библиотекарь задаёт новый срок возврата материала.3.C.Система обновляет срок возврата материала в записи выдачи.4.C.Система при необходимости формирует и направляет пользователю актуальное уведомление о сроке возврата.5.C.Альтернативный сценарий завершается.Исключения (Ошибки, отсутствие данных для отображения)E1Сбой записи в базу данных при создании выдачи.Выдача не создана.E2Ошибка синхронизации с удалённым филиалом.Выдача не подтверждена.ПостусловияМатериал числится как выданный пользователю.Возврат материалаОписаниеПользователь возвращает материал, библиотекарь регистрирует возврат в системе.Предусловия1. Материал числится за пользователем как выданный.2. Пользователь обращается в библиотеку для возврата материала.Акторы (Участники)Пользователь, Система, БиблиотекарьОсновной сценарий№ шагаДействие1Библиотекарь находит в системе запись о выдаче возвращаемого материала конкретному пользователю.2Библиотекарь регистрирует факт возврата материала в системе.3Система определяет фактическую дату возврата материала.4Система сравнивает фактическую дату возврата с установленным сроком возврата.5При отсутствии просрочки система изменяет статус материала на «доступен».6При наличии просрочки система рассчитывает размер штрафа в соответствии с действующими тарифами.7Система формирует и направляет пользователю уведомление о результатах возврата материала.8При наличии рассчитанного штрафа система формирует и направляет пользователю уведомление о начисленном штрафе.Альтернативный сценарий: Возврат повреждённого материала (шаг №2)1.А.Библиотекарь при приёме материала обнаруживает повреждение экземпляра.2.A.Библиотекарь фиксирует состояние повреждённого экземпляра в системе.3.А.Библиотекарь инициирует создание акта о повреждении материала.4.A.Система сохраняет сведения об акте повреждения материала.5.A.При необходимости система инициирует процедуру расчёта компенсации или иного вида ответственности в соответствии с правилами библиотеки.6.A.После фиксации повреждения возврат материала продолжает обрабатываться по основному сценарию с шага 3 ИЛИ переходит к отдельной процедуре урегулирования (в зависимости от принятых правил).Альтернативный сценарий: Досрочный возврат материала1.B.Пользователь возвращает материал до наступления срока возврата.2.B.Система фиксирует отсутствие просрочки при выполнении сравнения дат возврата.3.B.Система пропускает расчёт штрафа и изменяет статус материала на «доступен».4.B.Альтернативный сценарий завершается продолжением основного сценария с шага 7.Альтернативный сценарий: Малая просрочка и отмена штрафа (шаг №6)1.C.Система определяет, что просрочка возврата материала не превышает установленный порог (например, одни сутки).2.C.Система рассчитывает штраф в соответствии с тарифами.3.C.Библиотекарь принимает решение отменить начисленный штраф при малой просрочке.4.C.Библиотекарь инициирует в системе отмену рассчитанного штрафа.5.C.Система отменяет начисленный штраф и сохраняет соответствующую запись.6.C.Система формирует и направляет пользователю уведомление об отмене штрафа.7.C.Альтернативный сценарий завершается.Исключения (Ошибки, отсутствие данных для отображения)E1Ошибка обновления статуса материала.Статус материала не обновлён.E2Ошибка расчёта штрафа из-за отсутствия данных о тарифе.Отсутствует данные о тарифе для расчёта штрафа.ПостусловияМатериал возвращён и снова доступен. При необходимости начислен штраф.Погашение штрафаОписаниеПользователь оплачивает начисленный штраф через платёжный сервис.Предусловия1. Пользователь авторизован.2. В системе существует хотя бы один активный штраф, начисленный пользователю.Акторы (Участники)Пользователь, СистемаОсновной сценарий№ шагаДействие1Пользователь запрашивает в системе список своих активных штрафов.2Система формирует список активных штрафов пользователя.3Система отображает пользователю список активных штрафов.4Пользователь выбирает штраф для оплаты.5Пользователь инициирует оплату выбранного штрафа.6Система передаёт параметры выбранного штрафа в платёжный сервис и передаёт ему управление для проведения операции.7Пользователь вводит платёжные реквизиты в платёжном сервисе.8Пользователь подтверждает выполнение платежа.9Платёжный сервис обрабатывает платёж.10Платёжный сервис формирует результат обработки платежа.11Платёжный сервис передаёт результат обработки платежа в систему.12При успешной оплате система обновляет статус штрафа на «оплачен».13Система формирует и направляет пользователю уведомление об успешной оплате штрафа.Альтернативный сценарий: Отмена оплаты пользователем (шаг №8)1.А.Пользователь отменяет подтверждение платежа в платёжном сервисе.2.A.Платёжный сервис прекращает обработку операции оплаты.3.А.Платёжный сервис передаёт в систему информацию об отменённой операции.4.A.Система сохраняет исходный статус штрафа как «не оплачен».5.A.Система возвращает пользователя к просмотру списка активных штрафов (аналог состояния после шага 3 основного сценария).6.A.Альтернативный сценарий завершается.Альтернативный сценарий: Платёж отклонён банком (шаг №9–11)1.B.Платёжный сервис получает от банка отказ в проведении операции оплаты.2.B.Платёжный сервис формирует информацию о неуспешной операции.3.B.Платёжный сервис передаёт в систему информацию об отказе в проведении платежа.4.B.Система сохраняет статус штрафа как «не оплачен».5.B.Система информирует пользователя о том, что платёж отклонён.6.B.Система предлагает пользователю повторить попытку оплаты штрафа.7.B.Альтернативный сценарий завершается, пользователь при желании может повторно инициировать основной сценарий.Альтернативный сценарий: Задержка подтверждения от платёжного сервиса (шаг №8)1.C.Система фиксирует отсутствие результата от платёжного сервиса в установленный интервал времени.2.C.Система устанавливает для штрафа промежуточный статус (например, «ожидает подтверждения оплаты»).3.C.Система продолжает периодически запрашивать у платёжного сервиса состояние операции.4.C.При получении подтверждения успешной оплаты от платёжного сервиса система обновляет статус штрафа на «оплачен».5.C.Система формирует и направляет пользователю уведомление об успешной оплате штрафа.6.C.При получении информации об отказе система действует по шагам альтернативного сценария 2.7.C.Альтернативный сценарий завершается.Исключения (Ошибки, отсутствие данных для отображения)E1Ошибка соединения с платёжным сервисом.Система уведомляет о невозможности проведения операции.E2Сбой записи данных о транзакции.Система не меняет статус штрафа и логирует ошибку.ПостусловияШтраф оплачен и удалён из списка активных.3. Функциональные требования3.1 Регистрация / Авторизация пользователя1. Система должна проверять корректность введённых пользователем данных регистрации (e-mail, пароль, подтверждение пароля, ФИО).2. Система должна проверять уникальность указанного пользователем e-mail при регистрации.3. Система должна создавать учётную запись пользователя при успешной проверке регистрационных данных.4. Система должна отправлять пользователю письмо с подтверждением регистрации на указанный e-mail.5. Система должна активировать учётную запись пользователя при переходе по ссылке из письма подтверждения.6. Система должна отказывать в регистрации, если указанный пользователем e-mail уже используется другой учётной записью.7. Система должна отображать пользователю сообщение о несоответствии пароля и его подтверждения при их различии.8. Система должна позволять пользователю повторно отправлять письмо активации учётной записи.9. Система должна сообщать пользователю об ошибках соединения или сбоях базы данных при выполнении операций регистрации и авторизации.10. Система должна удалять неактивированные учётные записи пользователей по истечении установленного срока.11. Система должна позволять пользователю, имеющему активную учётную запись, выполнять вход в систему.12. Система должна блокировать невалидные сессии и предотвращать доступ при некорректных попытках авторизации.3.2 Поиск материалов1. Система должна предоставлять пользователю средства для ввода поисковых запросов по каталогу материалов.2. Система должна искать материалы по ключевым характеристикам (например, названию, автору, идентификатору, ISBN и др.).3. Система должна отображать пользователю список найденных материалов с основной информацией о каждом материале.4. Система должна поддерживать фильтрацию результатов поиска по заданным пользователем параметрам (жанру, году издания, типу материала, наличию и т. п.).5. Система должна поддерживать сортировку результатов поиска (например, по алфавиту, дате издания, дате добавления).6. Система должна сообщать пользователю о том, что по заданным критериям не найдено ни одного материала.7. Система должна отображать пользователю список популярных или рекомендованных материалов при отсутствии введённого поискового запроса.8. Система должна отображать пользователю сообщение о некорректной комбинации фильтров, если заданные параметры отбора не дают результатов.9. Система должна обеспечивать корректную работу поиска по каталогу при высокой нагрузке и большом объёме данных.10. Система должна сообщать пользователю о временной недоступности поиска при сбое соединения или внутренних ошибках.3.3 Оформление брони1. Система должна позволять авторизованному пользователю инициировать бронирование выбранного материала из каталога.2. Система должна проверять доступность экземпляров материала для бронирования перед созданием записи брони.3. Система должна создавать запись бронирования материала за пользователем при успешной проверке условий.4. Система должна уведомлять библиотекаря о созданной пользователем брони.5. Система должна уведомлять пользователя об успешном создании бронирования материала.6. Система должна предлагать пользователю включиться в очередь ожидания, если все экземпляры выбранного материала уже забронированы.7. Система должна отказывать пользователю в создании новой брони, если превышен установленный лимит активных бронирований.8. Система должна позволять пользователю отменять созданную бронь до её подтверждения или обработки библиотекарем.9. Система должна сохранять все операции, связанные с бронированием материалов, в журнале действий.10. Система должна обрабатывать ошибки записи в базу данных при создании или отмене брони и уведомлять пользователя о невозможности выполнения операции.11. Система должна предотвращать дублирование активных броней одного и того же материала для одного пользователя.3.4 Оформление выдачи материала1. Система должна позволять библиотекарю находить пользователя по идентификатору, имени или иному уникальному атрибуту при оформлении выдачи.2. Система должна проверять отсутствие у пользователя активных блокирующих штрафов или критических просрочек перед выдачей материала.3. Система должна проверять доступность выбранного экземпляра материала для выдачи пользователю.4. Система должна фиксировать факт выдачи материала пользователю с указанием даты выдачи, срока возврата и места (филиала) выдачи.5. Система должна уведомлять пользователя о выданных материалах и установленных сроках возврата.6. Система должна блокировать выдачу новых материалов пользователю при наличии у него просроченных материалов.7. Система должна предотвращать выдачу материала пользователю, если данный экземпляр зарезервирован другим пользователем.8. Система должна позволять библиотекарю изменять срок возврата материала в соответствии с внутренними правилами библиотеки.9. Система должна обрабатывать ошибки записи данных о выдаче в базе данных и уведомлять библиотекаря о невозможности завершения операции.10. Система должна обеспечивать синхронизацию данных о выдаче материалов между филиалами библиотеки при распределённом хранении данных.11. Система должна хранить журнал всех выданных экземпляров с указанием дат выдачи, возврата и идентификаторов пользователей и материалов.3.5 Возврат материала1. Система должна позволять библиотекарю находить запись выдачи по пользователю, материалу или идентификатору экземпляра при возврате.2. Система должна фиксировать факт возврата материала в учётной записи выдачи.3. Система должна проверять фактическую дату возврата материала и сравнивать её с установленным сроком возврата.4. Система должна начислять пользователю штраф при обнаружении просрочки возврата в соответствии с действующими тарифами.5. Система должна позволять библиотекарю вручную отменять начисленный штраф при малой просрочке в рамках установленных правил.6. Система должна изменять статус возвращённого материала на «доступен» после успешной регистрации возврата.7. Система должна отправлять пользователю уведомление о принятом возврате материала.8. Система должна уведомлять пользователя о начисленном штрафе при наличии просрочки возврата.9. Система должна позволять библиотекарю фиксировать факт повреждения материала при его возврате.10. Система должна создавать запись (акт) о повреждении материала с указанием состояния экземпляра и необходимых деталей.11. Система должна обрабатывать ошибки при обновлении статуса материала и начислении штрафа, не допуская неконсистентного состояния данных.12. Система должна обрабатывать случаи отсутствия данных о тарифах при расчёте штрафа и уведомлять об этом библиотекаря или администратора.3.6 Погашение штрафа1. Система должна предоставлять пользователю доступ к актуальному списку его активных штрафов.2. Система должна позволять пользователю выбирать штраф из списка и инициировать его оплату.3. Система должна перенаправлять пользователя для оплаты штрафа в защищённый платёжный сервис.4. Система должна получать от платёжного сервиса статус выполненной транзакции (успех, отказ, отмена, ожидание подтверждения).5. Система должна обновлять статус штрафа на «оплачен» при получении успешного подтверждения оплаты от платёжного сервиса.6. Система должна отображать пользователю сообщение об успешной оплате штрафа после изменения его статуса.7. Система должна не изменять статус штрафа при отмене пользователем операции оплаты или при отказе в проведении платежа.8. Система должна повторно запрашивать статус операции оплаты у платёжного сервиса при задержке подтверждения результата.9. Система должна обрабатывать ошибки соединения с платёжным сервисом и информировать пользователя о невозможности завершения операции оплаты.10. Система должна обрабатывать ошибки записи данных о транзакции оплаты в базу данных и обеспечивать целостность статусов штрафов.11. Система должна обеспечивать журналирование всех операций, связанных с оплатой штрафов, для последующего аудита.12. Система должна защищать передаваемые платёжные данные пользователя от несанкционированного доступа и утечек.